define=function(){if(typeof wink=="undefined")wink={};var b=arguments,a=b.length;return(a==1?b[0]:a==2?b[1]:b[2])(wink)};define.amd={vendor:"winktoolkit.org"};define(function(){if(typeof wink=="undefined")wink={};return wink});
define(["../../_kernel/js/kernel"],function(b){b.version="1.4.1";b.api={};b.mm={};b.net={};b.plugins={};b.ui={form:{},layout:{},xy:{},xyz:{}};b.ux={};var a=Array.prototype.slice,d=window;b.byId=function(g){return b.isString(g)?document.getElementById(g):g};b.query=function(g,e){return a.call((e||document).querySelectorAll(g))};var c="en_EN";b.setLocale=function(g){c=g};b.translate=function(g,e){var h=g,i=window.i18n||{};if(b.isSet(e)&&b.isSet(e.i18n))i=e.i18n;var m=i[c];if(b.isUndefined(m))m=i;i=
m[g];b.isUndefined(i)||(h=i);return h};b.isUndefined=function(g){return g===undefined};b.isNull=function(g){return g===null};b.isSet=function(g){return!b.isUndefined(g)&&!b.isNull(g)};b.isCallback=function(g){return!!(g&&g.method)};b.isString=function(g){return typeof g=="string"||g instanceof String};b.isInteger=function(g){return parseInt(g)===g};b.isNumber=function(g){return typeof g=="number"||g instanceof Number};b.isArray=function(g){return typeof g=="array"||g instanceof Array};b.isBoolean=
function(g){return typeof g=="boolean"||g instanceof Boolean};b.isFunction=function(g){return Object.prototype.toString.call(g)==="[object Function]"};b.trim=function(g){return g.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};b.bind=function(g,e){var h=a.call(arguments,2);return function(){var i=h.concat(a.call(arguments,0));return g.apply(e,i)}};b.call=function(g,e){var h=d,i=g.method,m=[];if(b.isSet(g.context))h=g.context;if(arguments.length==2)m=[e];if(b.isSet(g.arguments)){var p=g.arguments;b.isArray(p)||
(p=[g.arguments]);m=m.concat(p)}return h[i].apply(h,m)};b.connect=function(g,e,h){if(!b.isSet(h.context))h.context=d;var i=g[e];if(b.isNull(i)||b.isUndefined(i.cbs)){var m=function(){var l=arguments.callee.target,n=[],j,k=arguments.length;for(j=0;j<k;j++){var o=arguments[j];n=b.isArray(o)?n.concat([o]):n.concat(o)}l&&l.apply(g,n);l=g[e].cbs;for(var q in l)b.isArray(l[q].arguments)?b.call({context:l[q].context,method:l[q].method,arguments:n.concat(l[q].arguments)}):b.call({context:l[q].context,method:l[q].method,
arguments:n.concat([l[q].arguments])})};m.target=i;m.cbs=[];i=g[e]=m}for(var p in i.cbs)if(i.cbs[p].context==h.context&&i.cbs[p].method==h.method)return;i.cbs.push(h)};b.disconnect=function(g,e,h){if(!b.isSet(h.context))h.context=d;g=g[e];if(!b.isUndefined(g.cbs))for(var i in g.cbs)g.cbs[i].context==h.context&&g.cbs[i].method==h.method&&delete g.cbs[i]};b.setTimeout=function(g,e,h){var i=a.call(arguments,3);return setTimeout(function(){g[e].apply(g,i)},h)};b.setInterval=function(g,e,h){var i=a.call(arguments,
3);return setInterval(function(){g[e].apply(g,i)},h)};var f=100;b.getUId=function(){return f+=1};if(b.isUndefined(d._))_=b.bind(b.translate,b);if(b.isUndefined(d.$$))$$=b.bind(b.query,b);if(b.isUndefined(d.$))$=b.bind(b.byId,b);return b});
define(["../../../_base/_base/js/base"],function(b){var a=HTMLElement.prototype,d=b.isUndefined,c=function(l,n){for(var j={x:0,y:0},k=this;k&&k!=l;){j.x+=k.offsetLeft;j.y+=k.offsetTop;if(n){j.x+=b.fx.getTransformPosition(k).x;j.y+=b.fx.getTransformPosition(k).y}k=k.offsetParent}return j},f=function(l,n){return this.getPosition(l,n).y},g=function(l,n){return this.getPosition(l,n).x},e=function(l,n,j){b.fx.applyTranslate(this,l,n,j)},h=function(l,n){b.fx.applyScale(this,l,n)},i=function(l){b.fx.applyRotate(this,
l)},m=function(l,n,j){b.ux.gesture.listenTo(this,l,n,j)},p=function(l,n){b.ux.gesture.unlistenTo(this,l,n)};a.winkGetPosition=c;a.winkGetTopPosition=f;a.winkGetLeftPosition=g;a.winkTranslate=e;a.winkScale=h;a.winkRotate=i;a.winkListenToGesture=m;a.winkUnlistenToGesture=p;if(d(a.getPosition))a.getPosition=c;if(d(a.getTopPosition))a.getTopPosition=f;if(d(a.getLeftPosition))a.getLeftPosition=g;if(d(a.rotate))a.rotate=i;if(d(a.scale))a.scale=h;if(d(a.translate))a.translate=e;if(d(a.listenToGesture))a.listenToGesture=
m;if(d(a.unlistenToGesture))a.unlistenToGesture=p;return b});define(["../../../_base/_base/js/base"],function(b){b.error={logLevel:0,log:function(a){if(this.logLevel==1)typeof console!="undefined"?console.log(a):alert(a)}};b.log=b.bind(b.error.log,b.error);return b.error});
define(["../../../_base/_base/js/base"],function(b){var a=window.JSON;b.json={parse:function(d){if(b.isSet(a)&&b.isSet(a.parse))return a.parse(d);else{var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;d=String(d);c.lastIndex=0;if(c.test(d))d=d.replace(c,function(g){return"\\u"+("0000"+g.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(d.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))var f=eval("("+d+")");return f}},concat:function(d,c){for(var f in c)d[f]=c[f];return d}};b.parseJSON=b.bind(b.json.parse,b.json);b.mixin=b.bind(b.json.concat,b.json);return b.json});
define(["../../../_base/_base/js/base","../../error/js/error"],function(b){function a(g,e){if(b.isCallback(e)){var h=[g.toLowerCase(),e];f.push(h)}}function d(g,e){var h=g.toLowerCase(),i,m=f.length;for(i=0;i<m;i++){var p=f[i];if(p[0]==h&&p[1].method==e.method&&p[1].context==e.context){f.splice(i,1);break}}}function c(g,e){var h=g.toLowerCase(),i,m=f.length;for(i=0;i<m;i++){var p=f[i];p&&p[0]==h&&b.isSet(p[1])&&b.call(p[1],e)}}var f=[];b.topics={_getTopics:function(){return f}};b.topics.subscribe=
a;b.topics.unsubscribe=d;b.topics.publish=c;b.publish=c;b.subscribe=a;b.unsubscribe=d;return b.topics});
define(["../../../_base/_base/js/base"],function(b){var a,d,c,f,g,e,h,i,m,p,l,n,j,k,o,q,s,r,t,u,w,B,C,E;a=d=c=f=g=e=h=i=w=B=C=E=false;m=p=l=n=j=k=o=q=s=0;var x=b.isSet;d=function(z,D){return RegExp(z).test(D)};var y=function(z,D,A){var v={v:0,r:0,u:0};z=RegExp(D).exec(z);if(x(z)&&z.length>1){z=z[2];D=RegExp("[^\\"+A+"0-9]").exec(z);if(x(D))z=z.slice(0,D.index);A=z.split(A);if(A.length>0)v.v=A[0];if(A.length>1)v.r=A[1];if(A.length>2)v.u=A[2];if(A.length>3)v.u+="."+A[3]}return v};a=navigator||{};r=
a.userAgent;t=a.platform;u=a.appVersion;a=d(" AppleWebKit/",r);B=d(/bada/gi,r);C=d(/Opera/gi,r);if(x(t)){if(d(/iphone/i,t))c=true;if(d(/ipod/i,t))f=true;if(d(/ipad/i,t))g=true;if(d(/blackberry/i,t))w=true}if(x(u)){if(d(/android/i,u))e=true;if(d(/safari/i,u)){h=true;t=y(u,"( Version/)([^ ]+)",".");n=t.v;j=t.r;k=t.u}if(d(/MSIE/i,u)){E=true;t=y(u,"( MSIE )([^ ]+)",".");n=t.v;j=t.r}}if(!h&&!a)i=d(/mozilla/i,r);d=c||f||e||w||B||d(" Mobile/",r);if(a){t=y(r,"( AppleWebKit/)([^ ]+)",".");m=t.v;p=t.r;l=t.u}if(d&&
x(u)){o=e?["( Android )([^ ]+)","."]:["( OS )([^ ]+)","_"];if(w)o=["( BlackBerry )([^ ]+)","."];y=y(u,o[0],o[1]);o=y.v;q=y.r;s=y.u}b.ua={isWebkit:a,isMobile:d,isIPhone:c,isIPod:f,isIPad:g,isIOS:c||f||g,isAndroid:e,isBlackBerry:w,isBada:B,isOpera:C,isSafari:h,isMozilla:i,isIE:E,webkitVersion:m,webkitMinorVersion:p,webkitUpdateVersion:l,browserVersion:n,browserMinorVersion:j,browserUpdateVersion:k,osVersion:o,osMinorVersion:q,osUpdateVersion:s};return b.ua});
define(["../../../_base/_base/js/base"],function(b){function a(e){if(g(c[e]))c[e]=c[e]();return c[e]}function d(e,h,i){if(typeof c[e]=="undefined"){var m=h;if(i&&g(h))m=h();c[e]=m}}var c={},f={},g=b.isFunction;b.has=a;b.has.prefixes=["-webkit-","-moz-","-o-","ms-","-khtml-"];b.has.prefix=null;b.has.inquire=d;b.has.inquireMap=function(e,h){if(!(!e||e.length==0))for(var i in e)d(i,e[i],h)};b.has.setProp=function(e,h){f[e]=h};b.has.deferProp=function(e,h){f[e]=g(h)?h:function(){a(h)}};b.has.prop=function(e){var h=
f[e];if(g(h)){h();h=f[e];if(g(h))h=e}return h||e};return b.has});define(["../../../_base/_base/js/base","./feat"],function(b){b=b.has;var a=b.inquire,d=window;a("json-parse",function(){var c;c=false;if(d.JSON&&typeof JSON.parse=="function"){c=JSON.parse('{"w":1}');c=!!(c&&c.w)}return c});return b});
define(["../../../_base/_base/js/base","./feat"],function(b){function a(k){var o=false;if(typeof p[k]==n){g(k,k);o=true}else{var q=c.prefix;q=q!=null?[q]:l;var s,r=q.length;for(s=0;s<r;s++){var t,u=q[s]+k;t=u;var w=/(-)([a-z])/;for(u=u.match(w);u!=null;){t=t.replace(w,RegExp.$2.toUpperCase());u=t.match(w)}t=t;if(typeof p[t]==n){c.prefix=q[s];g(k,t);o=true;break}}}return o}function d(k){return function(){a(k)}}var c=b.has,f=c.inquireMap,g=c.setProp,e=c.deferProp,h=window,i=h.document,m=i.createElement("div"),
p=m.style,l=c.prefixes,n="string",j={a:"transform-property",b:"transition-property",c:"transition-duration",d:"transition-delay",e:"transition-timing-function",f:"border-radius",g:"text-shadow",h:"box-shadow",i:"gradient",j:"perspective",k:"transform-origin",l:"transform-style",m:"transform",n:"css-transition",o:"css-perspective",p:"css-transform",q:"perspective-origin",r:"backface-visibility",s:"tap-highlight-color",t:"user-select",bg:"background-image"};e(j.a,j.p);e(j.m,j.p);e(j.b,j.n);e(j.c,j.n);
e(j.d,j.n);e(j.e,j.n);e(j.f,"css-border-radius");e(j.g,"css-text-shadow");e(j.h,"css-box-shadow");e(j.i,"css-gradient");e(j.j,j.o);e(j.k,j.o);e(j.l,j.o);e(j.q,j.o);e(j.r,d(j.r));e(j.s,d(j.s));e(j.t,d(j.t));f({"css-transform":function(){var k=a(j.m),o=c.prefix,q=j.m;if(o!=null)q=o+q;k?g(j.a,c.prop(j.m)):g(j.a,j.m);g(j.m,q);return k},"css-transition":function(){var k=true;return k=(k=(k=(k=k&&a(j.b))&&a(j.c))&&a(j.d))&&a(j.e)},"css-translate3d":function(){return c("css-matrix")},"css-border-radius":function(){return a(j.f)},
"css-text-shadow":function(){return a(j.g)},"css-box-shadow":function(){return a(j.h)},"css-gradient":function(){var k=j.i,o=j.bg,q=c.prefix;q=q!=null?["",q]:[""].concat(l);var s,r=q.length;for(s=0;s<r;s++){var t=q[s]+k;p.cssText=o+":"+(t+"(linear,left top,right bottom,from(#9f9),to(white));");if(p[o]&&p[o].indexOf(k)!=-1){g(k,t);return true}}return false},"css-perspective":function(){var k=a(j.j)&&a(j.k)&&a(j.l)&&a(j.q);k=k&&a(j.k+"-x")&&a(j.k+"-y")&&a(j.k+"-z");if(!k)return false;var o=c.prefix||
"";k=i.createElement("style");k.textContent="@media ("+o+"transform-3d){#wink_has{height:2px}}";i.getElementsByTagName("head")[0].appendChild(k);m.id="wink_has";i.documentElement.appendChild(m);o=m.offsetHeight===2;k.parentNode.removeChild(k);m.parentNode.removeChild(m);return o},"css-matrix":function(){var k=h.WebKitCSSMatrix;if(typeof k=="undefined")return false;var o=new k("matrix(1,0,0,1,6,7)"),q=o.m41==6&&o.m42==7&&o.m41==o.e&&o.m42==o.f;if(q){k=new k("matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,6,7,8,1)");
q=q&&o.m41==k.m41&&o.m42==k.m42&&k.m43==8}return q},"css-matrix-stack-inversed":function(){var k=b.ua;if(!c("css-matrix")||!k)return false;var o=k.isIOS?parseInt(""+k.osVersion+k.osMinorVersion+k.osUpdateVersion):500;k=k.isAndroid?parseInt(""+k.osVersion+k.osMinorVersion+k.osUpdateVersion):300;return o<421||k<300},"css-position-fixed":function(){var k=b.ua;if(k.isAndroid&&k.osVersion==2&&k.osMinorVersion==1||k.isBada)return false;if(k.isIOS)return k.osVersion<5?false:true;k=document.body;if(document.createElement&&
k&&k.appendChild&&k.removeChild){if(!m.getBoundingClientRect)return null;m.innerHTML="x";m.style.cssText="position:fixed;top:100px;";k.appendChild(m);var o=k.style.height,q=k.scrollTop;k.style.height="3000px";k.scrollTop=500;var s=m.getBoundingClientRect().top;k.style.height=o;o=s===100;k.removeChild(m);k.scrollTop=q;return o}return false}});return c});
define(["../../../_base/_base/js/base","./feat"],function(b){function a(h){return"on"+e[h]in g}var d=b.has;b=d.inquireMap;var c=d.setProp,f=d.deferProp,g=window.document.documentElement,e={ts:"touchstart",tm:"touchmove",te:"touchend",gs:"gesturestart",gc:"gesturechange",ge:"gestureend",tre:"transitionend"};f(e.ts,e.ts);f(e.tm,e.tm);f(e.te,e.te);f(e.tre,e.tre);b({touchstart:function(){var h=a("ts");c(e.ts,h?e.ts:"mousedown");return h},touchmove:function(){var h=a("tm");c(e.tm,h?e.tm:"mousemove");return h},
touchend:function(){var h=a("te");c(e.te,h?e.te:"mouseup");return h},touch:function(){return d(e.ts)&&d(e.tm)&&d(e.te)},gesturestart:function(){return a("gs")},gesturechange:function(){return a("gc")},gestureend:function(){return a("ge")},gesture:function(){return d(e.gs)&&d(e.gc)&&d(e.ge)},transitionend:function(){if(d("css-transition")){var h=d.prefix,i=e.tre;if(h=="-webkit-")i="webkitTransitionEnd";else if(h=="-o-")i="oTransitionEnd";c(e.tre,i);return true}return false}});return d});
define(["../../../_base/_base/js/base","./feat"],function(b){return b.has});
define(["../../../_base/_base/js/base","../../../_base/_feat/js/feat_css"],function(b){function a(l,n){var j=l.className;if((" "+j+" ").indexOf(" "+n+" ")<0)l.className=j+(j?" ":"")+n}function d(l,n){var j=b.trim((" "+l.className+" ").replace(" "+n+" "," "));if(l.className!=j)l.className=j}function c(l,n){var j,k=l.style;for(j in n){var o=i(j);k[o]=n[j]}}function f(l,n,j,k,o){var q=n;if(n.indexOf(",")==-1)q=i(n);else{n=n.split(",");var s=n.length;for(q=0;q<s;q++)n[q]=i(b.trim(n[q]));q=n.join(",")}c(l,
{"transition-property":q,"transition-duration":j,"transition-delay":k,"transition-timing-function":o})}function g(l){return window.getComputedStyle(l)[i("transform-property")]}function e(l,n){c(l,{"transform-property":n})}var h=b.isSet,i=b.has.prop,m={u:undefined};b.fx={};b.fx.addClass=a;b.fx.removeClass=d;b.fx.apply=c;b.fx.applyTransition=f;b.fx.applyTransformTransition=function(l,n,j,k){f(l,"transform",n,j,k)};b.fx.onTransitionEnd=function(l,n,j){var k=i("transitionend"),o=function(q){j!==true&&
l.removeEventListener(k,o,false);n(q)};l.addEventListener(k,o,false);return o};b.fx.getTransformPosition=function(l){var n={x:null,y:null};l=g(l);if(b.has("css-matrix")){if(l=="none")l="";l=new WebKitCSSMatrix(l);n.x=l.m41;n.y=l.m42}else{var j=RegExp(/matrix/i);if(j.test(l)){j=RegExp("[, ()]+","g");l=l.split(j);if(l.length>6&&l[0]=="matrix"){n.x=parseInt(l[5]);n.y=parseInt(l[6])}}}return n};b.fx.applyTranslate=function(l,n,j,k){p(l,n,j,m.u,m.u,m.u,k)};b.fx.applyScale=function(l,n,j){p(l,m.u,m.u,n,
j,m.u,m.u)};b.fx.applyRotate=function(l,n){p(l,m.u,m.u,m.u,m.u,n,m.u)};b.fx.getTransform=g;b.fx.setTransform=e;var p=function(l,n,j,k,o,q,s){var r=l._cssT||{};r=l._cssT={t:h(n)||h(j)?{tx:n,ty:j}:r.t,s:h(k)||h(o)?{sx:k,sy:o}:r.s,r:h(q)?{a:q}:r.r};k=r.t&&(h(r.t.tx)||h(r.t.ty));j=r.s&&(h(r.s.sx)||h(r.s.sy));n=r.r&&h(r.r.a);if(!b.has("css-translate3d")||b.ua.isAndroid&&(j||n))s=true;if(k){o=r.t.ty;s=s;k="";k=r.t.tx;h(k)||(k=0);o=o;h(o)||(o=0);q="0";var t=false;t=(t=t||b.isString(k)&&k.indexOf("%",0)!=
-1)||b.isString(o)&&o.indexOf("%",0)!=-1;if(!t){k+="px";o+="px";q+="px"}s=k=s?"translate("+k+", "+o+")":"translate3d("+k+", "+o+", "+q+")"}else s="";s=s;if(j){j=r.s.sy;k="";k=r.s.sx;h(k)||(k=1);j=j;h(j)||(j=1);j=k=b.has("css-perspective")?"scale3d("+k+", "+j+", 1)":"scale("+k+", "+j+")"}else j="";j=j;if(n){n="";r=r.r.a;h(r)||(r=0);r=n="rotate("+r+"deg)"}else r="";r=b.trim(s+" "+j+" "+r);e(l,r)};b.addClass=a;b.removeClass=d;return b.fx});
define(["../../../_base/_base/js/base"],function(b){b.math={round:function(a,d){b.isSet(d)||(d=0);var c=Math.pow(10,d);return Math.round(a*c)/c}};return b.math});
define(["../../../_base/_base/js/base","../../../_base/error/js/error","../../../_base/json/js/json"],function(b){var a=b.isSet;b.ux.Event=function(d){this.uId=b.getUId();this.multitouch=this.srcEvent=this.target=this.timestamp=this.y=this.x=this.type=null;b.mixin(this,d);this._validateProperties()};b.ux.Event.prototype={preventDefault:function(){this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},dispatch:function(d,c){var f=this.srcEvent,g=f.type;if(a(c))g=
c;g=g;var e="HTMLEvents";if(/blur|focus|resize|scroll/i.test(g))e="UIEvent";else if(/click|mouse(down|move|up)/i.test(g))e="MouseEvent";else if(/touch(start|move|end|cancel)/i.test(g))e="TouchEvent";var h=document.createEvent(e),i=f.changedTouches;if(e=="HTMLEvents")h.initEvent(g,f.bubbles,f.cancelable);else if(e=="UIEvent")h.initUIEvent(g,f.bubbles,f.cancelable,window,f.detail);else if(e=="MouseEvent"){e=f.screenX;var m=f.screenY,p=f.clientX,l=f.clientY;if(f.initTouchEvent&&i&&i.length>0){i=i[0];
e=i.screenX;m=i.screenY;p=i.clientX;l=i.clientY}h.initMouseEvent(g,f.bubbles,f.cancelable,document.defaultView,f.detail,e,m,p,l,f.ctrlKey,f.altKey,f.shiftKey,f.metaKey,f.button,f.relatedTarget)}else e=="TouchEvent"&&h.initTouchEvent(g,f.bubbles,f.cancelable,window,f.detail,f.screenX,f.screenY,f.clientX,f.clientY,f.ctrlKey,f.altKey,f.shiftKey,f.metaKey,f.touches,f.targetTouches,i,f.scale,f.rotation);d.dispatchEvent(h)},_validateProperties:function(){return true}};return b.ux.Event});
define(["../../../_base/_base/js/base","../../../_base/error/js/error","../../../_base/_feat/js/feat_event","../../event/js/event"],function(b){function a(i){var m={};m.x=i.pageX;m.y=i.pageY;m.target=i.target;return m}var d=[],c=b.has.prop,f={start:c("touchstart"),move:c("touchmove"),end:c("touchend"),gesturestart:c("gesturestart"),gesturechange:c("gesturechange"),gestureend:c("gestureend")},g={};for(var e in f)g[f[e]]=e;b.ux.touch={};b.ux.touch.addListener=function(i,m,p,l){if(b.isUndefined(f[m])){b.log("[touch] Cannot add listener for unknown eventType: "+
m);return false}b.isSet(l)||(l={});if(l===true)l={preventDefault:true};l={preventDefault:l.preventDefault===true?true:false,tracking:l.tracking===false?false:true,captureFlow:l.captureFlow===true?true:false};var n=null,j=h(i);if(j==null){n=new b.ux.touch.Element({domNode:i,tracking:l.tracking});d.push(n)}else n=d[j];if(!n.isListening(m)){if(n.eventHandler==null)n.eventHandler=function(k){var o=n,q=g[k.type],s={};s.type=q;s.srcEvent=k;s.timestamp=k.timeStamp;s.multitouch=false;if(!s.timestamp)s.timestamp=
(new Date).getTime();if(b.has("touch"))if(q=="gesturestart"||q=="gesturechange"||q=="gestureend"){s.target=k.target;s.x=0;s.y=0}else{var r=null;if(q=="end"){if(k.changedTouches&&k.changedTouches.length>0)r=k.changedTouches[0]}else if(k.targetTouches&&k.targetTouches.length>0)r=k.targetTouches[0];else if(k.changedTouches&&k.changedTouches.length>0)r=k.changedTouches[0];if(r!=null){r=a(r);s.x=r.x;s.y=r.y;s.target=r.target;if(k.touches&&k.touches.length>1)s.multitouch=true}}else{r=a(k);s.x=r.x;s.y=r.y;
s.target=r.target}k=new b.ux.Event(s);if(!o.isListening("start")||o.tracking==false)o.tracked=true;else if(q=="start")o.tracked=true;if(o.tracked==true){if(q=="end")o.tracked=false;o.notifyEvent(k)}};n.eventCaptures[m]=l.captureFlow;n.domNode.addEventListener(f[m],n.eventHandler,n.eventCaptures[m])}n.addEventCallback(m,p,l.preventDefault)};b.ux.touch.removeListener=function(i,m,p){i=h(i);if(i!=null){i=d[i];i.removeEventCallback(m,p);i.isListening(m)||i.domNode.removeEventListener(f[m],i.eventHandler,
i.eventCaptures[m])}};b.ux.touch.getTouchProperties=a;var h=function(i){var m,p=d.length;for(m=0;m<p;m++)if(d[m].domNode==i)return m;return null};b.ux.touch.Element=function(i){this.uId=b.getUId();this.domNode=null;this.tracked=this.tracking=false;this.eventHandler=null;this.eventCaptures={};this._els={};b.mixin(this,i);this._validateProperties()};b.ux.touch.Element.prototype={addEventCallback:function(i,m,p){if(!b.isCallback(m))return false;var l=this._els[i];if(l){i=l.callbacks;var n=i.length;for(p=
0;p<n;p++){var j=i[p];if(m.context==j.context&&m.method==j.method)return false}}else{l={preventDefault:p,callbacks:[]};this._els[i]=l}l.callbacks.push(m);return true},removeEventCallback:function(i,m){if(!b.isCallback(m))return false;var p=this._els[i];if(!p)return false;var l=p.callbacks,n,j=l.length;for(n=0;n<j;n++){var k=l[n];if(m.context==k.context&&m.method==k.method){p.callbacks.splice(n,1);break}}return true},isListening:function(i){if((i=this._els[i])&&i.callbacks.length>0)return true;return false},
notifyEvent:function(i){var m=this._els[i.type];if(m){m.preventDefault==true&&i.preventDefault();m=m.callbacks;for(var p=0;p<m.length;p++)b.call(m[p],i)}},_validateProperties:function(){return true}};return b.ux.touch});
define(["../../../_base/_base/js/base","../../../_base/error/js/error"],function(b){var a=b.isSet,d=b.isArray;b.net.Xhr=function(c){this.uId=b.getUId();this.request={xhrObject:null,params:c};this._create()};b.net.Xhr.prototype={sendData:function(c,f,g,e,h,i){var m=this.request,p=m.xhrObject,l=encodeURIComponent;g=g.toUpperCase();if(!(a(f)&&!d(f))){if(p){var n=null;if(a(f)){var j,k=f.length;for(j=0;j<k;j++){var o=f[j],q=o.name;o=o.value;if(g=="GET")c+=j==0&&c.indexOf("?")==-1?"?"+l(q)+"="+l(o):"&"+
l(q)+"="+l(o);else if(j==0)n=l(q)+"="+l(o);else n+="&"+l(q)+"="+l(o)}}try{p.open(g,c,true);p.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");if(a(i))if(d(i)){k=i.length;for(j=0;j<k;j++){var s=i[j];p.setRequestHeader(s.name,s.value)}}p.send(n)}catch(r){return false}p.onreadystatechange=function(){if(p.readyState==4){var t=p.status;if(t>=200&&t<400||t==0)a(e)&&b.call(e,m);else a(h)&&b.call(h,m)}}}else return false;return true}},_create:function(){var c=window.XMLHttpRequest;
if(c){var f;try{f=new c}catch(g){f=false}this.request.xhrObject=f}}};b.Xhr=b.net.Xhr;return b.Xhr});
define(["../../../../_base/_base/js/base","../../../../fx/_xy/js/2dfx"],function(b){var a=b.fx.apply,d=null,c=null,f=false;b.ui.xy.layer={visible:false,color:"#000",opacity:0.3,zIndex:998,show:function(){f||this._initDom();d.onclick=function(){var g=b.ui.xy.layer.onclick;b.isSet(g)&&g()};if(!this.visible){a(c,{height:document.body.scrollHeight+"px"});a(d,{display:"block"});this.visible=true}},hide:function(){if(f&&this.visible){a(d,{display:"none"});this.visible=false}},refresh:function(){f&&this.visible&&
a(c,{height:document.body.scrollHeight+"px"})},update:function(){f||this._initDom();a(d,{"z-index":this.zIndex});a(c,{backgroundColor:this.color,opacity:this.opacity})},_initDom:function(){var g=document;d=g.createElement("div");a(d,{position:"absolute",display:"none",top:0,width:"100%","z-index":this.zIndex,"tap-highlight-color":"rgba(0, 0, 0, 0)"});c=g.createElement("div");a(c,{width:"100%",backgroundColor:this.color,opacity:this.opacity});d.appendChild(c);g.body.appendChild(d);f=true}};b.layer=
b.ui.xy.layer;return b.layer});
define(["../../../_amd/core"],function(b){b.math.radToDeg=function(a){return a*180/Math.PI};b.math.degToRad=function(a){return a*Math.PI/180};b.math.getAngle=function(a,d){var c=Math.abs(d);if(c>a*2)c=a*2;var f=2*a*a;c=Math.acos(-((Math.pow(c,2)-(Math.pow(a,2)+Math.pow(a,2)))/f));if(isNaN(c))c=0;return c};b.math.getAngleBetweenVectors=function(a,d){var c=b.math.getScalarVector(a,d),f=b.math.getNormVector(a)*b.math.getNormVector(d);c=Math.acos(c/f);if(isNaN(c))c=0;return c};b.math.normalizeVector=
function(a){var d=[0,0,0,1],c=b.math.getNormVector(a);if(c<=0)return d;d[0]=a[0]/c;d[1]=a[1]/c;d[2]=a[2]/c;return d};b.math.getNormVector=function(a){a=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];return a=Math.sqrt(a)};b.math.getNormalVector=function(a,d){var c=[0,0,0,1];c[0]=a[1]*d[2]-a[2]*d[1];c[1]=a[2]*d[0]-a[0]*d[2];c[2]=a[0]*d[1]-a[1]*d[0];return c};b.math.getScalarVector=function(a,d){var c=0;return c=a[0]*d[0]+a[1]*d[1]+a[2]*d[2]};b.math.getVector=function(a,d){var c=[0,0,0,1];c[0]=d[0]-a[0];c[1]=d[1]-a[1];
c[2]=d[2]-a[2];return c};b.math.multiplyMatrixVector=function(a,d){var c=[0,0,0,1];d[3]||(d[3]=1);c[0]=d[0]*a[0]+d[1]*a[1]+d[2]*a[2]+d[3]*a[3];c[1]=d[0]*a[4]+d[1]*a[5]+d[2]*a[6]+d[3]*a[7];c[2]=d[0]*a[8]+d[1]*a[9]+d[2]*a[10]+d[3]*a[11];c[3]=d[0]*a[12]+d[1]*a[13]+d[2]*a[14]+d[3]*a[15];return c};return b.math});
define(["../../../_amd/core"],function(b){b.ux.history={_historyTimer:null,_historyQueue:[],_historyIndex:0,_historyCheckInterval:100,start:function(){window.location.hash="";this._historyQueue.push({hash:"",id:"main",params:""});if("onhashchange"in window)window.addEventListener("hashchange",b.bind(function(){this._check()},this),true);else this._historyTimer=b.setInterval(this,"_check",this._historyCheckInterval)},stop:function(){"onhashchange"in window?window.removeEventListener("hashchange",b.bind(function(){this._check()},
this),true):clearInterval(this._historyTimer)},push:function(a,d,c){b.isSet(c)||(c=b.getUId());window.location.hash=c;this._historyQueue.splice(this._historyIndex+1,this._historyQueue.length-this._historyIndex-1);this._historyQueue.push({hash:c,id:a,params:d});this._historyIndex=this._historyQueue.length-1},pop:function(a){for(var d=this._historyIndex-1;d>=0;d--)if(this._historyQueue[d]&&this._historyQueue[d].id==a){window.history.back(d-this._historyIndex);this._historyIndex=d;return}window.history.back(-this._historyIndex);
this._historyIndex=0},updateCheckInterval:function(a){if(!("onhashchange"in window)){this.stop();this._historyCheckInterval=a;this._historyTimer=b.setInterval(this,"_check",this._historyCheckInterval)}},_check:function(){if(this._historyQueue.length>0)for(var a=window.location.hash.substring(1,window.location.hash.length),d=this._historyQueue.length,c=0;c<d;c++)if(a==this._historyQueue[c].hash&&c!=this._historyIndex){if(c<this._historyIndex)for(a=this._historyIndex;a>c;a--)b.publish("/history/events/back",
{id:this._historyQueue[a-1].id,params:this._historyQueue[a-1].params});else if(c>this._historyIndex)for(a=this._historyIndex;a<c;a++)b.publish("/history/events/forward",{id:this._historyQueue[a+1].id,params:this._historyQueue[a+1].params});this._historyIndex=c;break}}};b.ux.history.start();return b.ux.history});
define(["../../../_amd/core","../../movementtracker/js/movementtracker"],function(b){b.ux.Inertia=function(a){this.uId=b.getUId();this._properties=a;this._movementtracker=null;if(this._validateProperties()!==false){this._initProperties();this._initListeners()}};b.ux.Inertia.prototype={_DIRECTION_X:"x",_DIRECTION_Y:"y",_INTERRUPTION_THRESHOLD:150,_EVENT_INERTIA_COMPUTED:"/inertia/events/inertiacomputed",destroy:function(){this._removeListeners()},_validateProperties:function(){return true},_initProperties:function(){this._movementtracker=
this._properties.movementtracker;delete this._properties},_initListeners:function(){b.subscribe("/movementtracker/events/mvtstored",{context:this,method:"_computeInertia"})},_removeListeners:function(){b.unsubscribe("/movementtracker/events/mvtstored",{context:this,method:"_computeInertia"})},_computeInertia:function(a){if(a.publisher.uId==this._movementtracker.uId){var d=a.movement,c={pointStatement:d.pointStatement},f=this._getSignificantMovement(d,this._DIRECTION_X);d=this._getSignificantMovement(d,
this._DIRECTION_Y);var g=f.pointStatement[0],e=d.pointStatement[0],h=f.pointStatement[f.pointStatement.length-1],i=d.pointStatement[d.pointStatement.length-1];c.dx=Math.abs(h.x-g.x);c.dy=Math.abs(i.y-e.y);c.dtx=h.globalDuration-g.globalDuration;if(c.dtx==0)c.dtx=1;c.dty=i.globalDuration-e.globalDuration;if(c.dty==0)c.dty=1;c.directionX=f.direction;c.directionY=d.direction;c.speedX=c.dx/c.dtx;c.speedY=c.dy/c.dty;b.publish(this._EVENT_INERTIA_COMPUTED,{publisher:this,movement:c,uxEvent:a.uxEvent,target:a.target})}},
_getSignificantMovement:function(a,d){var c=this._extractDirectedMovement(a,d);c=this._extractInterruptedMovement(c[c.length-1]);return c[c.length-1]},_extractDirectedMovement:function(a,d){var c=[],f=a.pointStatement,g=0,e=f[0].directionX;if(d==this._DIRECTION_Y)e=f[0].directionY;for(var h=0;h<f.length;h++){var i=f[h],m=i.directionX;if(d==this._DIRECTION_Y)m=i.directionY;if(e!=m||h==f.length-1){i=h;if(h==f.length-1)i=f.length;g={pointStatement:f.slice(g,i),direction:e};c.push(g);g=h;e=m}}return c},
_extractInterruptedMovement:function(a){for(var d=[],c=a.pointStatement,f=0,g=0,e=0;e<c.length;e++){g+=c[e].duration;var h=e;if(g>this._INTERRUPTION_THRESHOLD||e==c.length-1){if(e==c.length-1&&g<=this._INTERRUPTION_THRESHOLD)h=c.length;g=0;var i=c.slice(f,h);i={pointStatement:i,direction:a.direction};d.push(i);f=e;if(e==c.length-1&&g>this._INTERRUPTION_THRESHOLD){i=c.slice(h,h+1);i={pointStatement:i,direction:a.direction};d.push(i)}}}return d}};return b.ux.Inertia});
define(["../../../_amd/core"],function(b){b.ux.MovementTracker=function(a){this.uId=b.getUId();this._properties=a;this._previousPoint=this._startPoint=this._pointStatement=this._target=null;this._tracking=false;this._acceptEvents=true;this._multitouch=false;this._params={captureFlow:true,preventStart:true,preventMove:false,shiftThreshold:0,trackThresholdX:0,trackThresholdY:0};if(this._validateProperties()!==false){this._initProperties();this._initListeners()}};b.ux.MovementTracker.prototype={updateTrackThresholdX:function(a){if(this._isValidThreshold(a))this._params.trackThresholdX=
a;else this._raisePropertyError("trackThresholdX")},updateTrackThresholdY:function(a){if(this._isValidThreshold(a))this._params.trackThresholdY=a;else this._raisePropertyError("trackThresholdY")},destroy:function(){this._removeListeners()},_validateProperties:function(){return true},_isValidThreshold:function(a){return b.isInteger(a)&&a>=0},_raisePropertyError:function(a){b.log("[MovementTracker] Error: "+a+" missing or invalid")},_initProperties:function(){this._target=$(this._properties.target);
if(this._properties.captureFlow===false)this._params.captureFlow=false;if(this._properties.preventStart===false)this._params.preventStart=false;if(this._properties.preventMove===true)this._params.preventMove=true;if(b.isSet(this._properties.trackThresholdX))this._params.trackThresholdX=this._properties.trackThresholdX;if(b.isSet(this._properties.trackThresholdY))this._params.trackThresholdY=this._properties.trackThresholdY;delete this._properties},_initListeners:function(){b.ux.touch.addListener(this._target,
"start",{context:this,method:"_handleTouchStart"},{preventDefault:this._params.preventStart,captureFlow:this._params.captureFlow});b.ux.touch.addListener(this._target,"move",{context:this,method:"_handleTouchMove"},{preventDefault:this._params.preventMove,captureFlow:this._params.captureFlow});b.ux.touch.addListener(this._target,"end",{context:this,method:"_handleTouchEnd"},{captureFlow:this._params.captureFlow})},_removeListeners:function(){b.ux.touch.removeListener(this._target,"start",{context:this,
method:"_handleTouchStart"});b.ux.touch.removeListener(this._target,"move",{context:this,method:"_handleTouchMove"});b.ux.touch.removeListener(this._target,"end",{context:this,method:"_handleTouchEnd"})},_handleTouchStart:function(a){if(b.ua.isAndroid)if(!this.defered){this.defered=true;if((new Date).getTime()-a.timestamp>100){this._acceptEvents=false;a.preventDefault();var d,c={exec:b.bind(function(){clearTimeout(d);this._acceptEvents=true;this._handleTouchStart(a)},this)};d=b.setTimeout(c,"exec",
0);return}}if(this._acceptEvents!=false){this._multitouch=false;if(a.multitouch==true)this._multitouch=true;else{this._acceptEvents=false;this._pointStatement=[];this._previousPoint=null;this._tracking=false;this._startPoint={x:a.x,y:a.y};c=this._onNewTouch(a);b.publish(c.name,c.params);this._acceptEvents=true}}},_handleTouchMove:function(a){if(this._acceptEvents!=false)if(!this._multitouch){this._acceptEvents=false;a=this._onNewTouch(a);b.publish(a.name,a.params);this._acceptEvents=true}},_handleTouchEnd:function(a){if(this._acceptEvents!=
false)if(!this._multitouch){this._acceptEvents=false;a=this._onNewTouch(a);b.publish(a.name,a.params);this._acceptEvents=true}},_onNewTouch:function(a){if(this._tracking==false)if(this._params.trackThresholdX==0||this._params.trackThresholdY==0)this._tracking=true;else{var d={x:a.x,y:a.y},c=Math.abs(d.x-this._startPoint.x);d=Math.abs(d.y-this._startPoint.y);if(c>this._params.trackThresholdX||d>this._params.trackThresholdY)this._tracking=true}c={name:"/movementtracker/events/notrack",params:{publisher:this,
uxEvent:a,target:this._target}};if(this._tracking==false)return c;if(this._pointStatement.length==0)c.name="/movementtracker/events/mvtbegin";else if(a.type=="move")c.name="/movementtracker/events/mvtchanged";else if(a.type=="end")c.name="/movementtracker/events/mvtstored";this._addTouch(a);c.params.movement=this._getCurrentMovement();return c},_addTouch:function(a){a={x:a.x,y:a.y,timestamp:a.timestamp};var d=0,c=0,f=0,g=0,e=0,h=0;if(this._previousPoint==null){a.duration=0;a.globalDuration=0;d=a.x;
c=a.y}else{d=this._previousPoint.x;c=this._previousPoint.y;f=this._previousPoint.globalDx;g=this._previousPoint.globalDy;e=this._previousPoint.directionX;h=this._previousPoint.directionY;a.duration=a.timestamp-this._previousPoint.timestamp;a.globalDuration=a.duration+this._previousPoint.globalDuration}a.dx=Math.abs(a.x-d);a.dy=Math.abs(a.y-c);a.globalDx=a.dx+f;a.globalDy=a.dy+g;a.directionX=e;a.directionY=h;if(e==0&&this._previousPoint!=null){if(a.x<d)a.directionX=-1;else if(a.x>d)a.directionX=1;
this._previousPoint.directionX=a.directionX}if(h==0&&this._previousPoint!=null){if(a.y<c)a.directionY=-1;else if(a.y>c)a.directionY=1;this._previousPoint.directionY=a.directionY}if(e>0&&a.x+this._params.shiftThreshold<d)a.directionX=-1;else if(e<0&&a.x-this._params.shiftThreshold>d)a.directionX=1;if(h>0&&a.y+this._params.shiftThreshold<c)a.directionY=-1;else if(h<0&&a.y-this._params.shiftThreshold>c)a.directionY=1;this._pointStatement.push(a);this._previousPoint=a},_getCurrentMovement:function(){var a=
this._pointStatement[this._pointStatement.length-1];return{pointStatement:this._pointStatement,duration:a.globalDuration,dx:a.globalDx,dy:a.globalDy}}};return b.ux.MovementTracker});
define(["../../../_amd/core"],function(b){b.ux.window={height:null,width:null,fullHeight:null,fullWidth:null,screenHeight:screen.height,screenWidth:screen.width,orientation:null,_i:null,_V:"vertical",_H:"horizontal",_init:function(){var a=b.bind(this._updateData,this);"onorientationchange"in window?window.addEventListener("orientationchange",a,true):window.addEventListener("resize",a,true);if(b.ua.isAndroid){scrollTo(0,1,0);this._i=setInterval(a,1E3)}else window.addEventListener("scroll",a,true);
a()},_updateData:function(){var a=window.innerWidth,d=window.innerHeight,c=false;if(this.width+2<a||this.width-2>a||this.height+2<d||this.height-2>d)c=true;this._updateSize();this._updateOrientation();c&&b.publish("/window/events/resize",{height:d,width:a,orientation:this.orientation})},_updateSize:function(){this.height=window.innerHeight;this.width=window.innerWidth;try{this.fullHeight=document.body.scrollHeight;this.fullWidth=document.body.scrollWidth}catch(a){}},_updateOrientation:function(){var a;
a=b.isSet(window.orientation)&&b.ua.isIOS?Math.abs(window.orientation)==90?this._H:this._V:this.width>this.height?this._H:this._V;if(a!=this.orientation){this.orientation=a;b.publish("/window/events/orientationchange",{height:this.height,width:this.width,orientation:a})}}};window.addEventListener("DOMContentLoaded",function(){b.ux.window._init()});b.ux.Window=function(){this.getProperties=function(){return{screenWidth:b.ux.window.screenWidth,screenHeight:b.ux.window.screenHeight,width:b.ux.window.width,
height:b.ux.window.height,orientation:b.ux.window.orientation}}};return b.ux.window});
define(["../../../../_amd/core","../../../../math/_geometric/js/geometric"],function(b){b.ui.xy.CSpinner=function(e){this.uId=b.getUId();this._domNode=null;b.mixin(this,e);if(this._validateProperties()!==false){this._initProperties();this._initDom()}};b.ui.xy.CSpinner.prototype={getDomNode:function(){return this._domNode},toggle:function(){this._timer?this._stopRendering():this._startRendering()},_startRendering:function(){if(!this._timer)this._timer=b.setInterval(this,"_render",this.refreshRate)},
_stopRendering:function(){clearInterval(this._timer);this._timer=null},_render:function(){this._ctx.clearRect(0,0,this.size,this.size);var e=this._ctx,h=this._cx,i=this._cy,m=this._r1,p=this._r2,l=this.count,n=this.space,j=this.linewidth,k=this._grdcolors,o=this.linecolor,q,s,r=(360-n*l)/l,t=0;q=0;for(s=l-this._position-1;q<l;q++){s=(s+1)%l;var u=e,w=h,B=i,C=m,E=p,x=t,y=t+r,z=j,D=k[s],A=o;u.beginPath();var v=c(w,B,C,x);u.moveTo(v.x,v.y);v=void 0;v=y>x?false:true;u.arc(w,B,C,d(x-90),d(y-90),v);v=c(w,
B,E,y);u.lineTo(v.x,v.y);v=void 0;v=x>y?false:true;u.arc(w,B,E,d(y-90),d(x-90),v);v=c(w,B,C,x);u.lineTo(v.x,v.y);u.closePath();c(w,B,C,x+Math.abs(y-x)/2);c(w,B,E,x+Math.abs(y-x)/2);u.fillStyle=D;u.fill();if(z>0){u.lineWidth=z;u.strokeStyle=A||"transparent";u.stroke()}t+=r+n}this._position=(this._position+1)%this.count},_validateProperties:function(){return true},_initDom:function(){var e=this._domNode=document.createElement("canvas");e.translate(0,0);this._ctx=e.getContext("2d");e.width=this.size;
e.height=this.size;this._render();this._startRendering()},_initProperties:function(){var e=this,h=function(i,m){if(e[i]!==0)e[i]=e[i]||m};h("size",25);h("fromcolor","#ccc");h("tocolor","#000");h("stopcolor",0.4);h("linecolor",null);h("radius",7);h("thickness",5);h("count",Math.floor(e.radius*1.5));h("space",10);h("linewidth",1);h("refreshRate",40);e._cx=e.size/2;e._cy=e.size/2;e._r1=e.radius;e._r2=e._r1+e.thickness;e._timer=null;e._grdcolors=f(e.fromcolor,e.tocolor,e.stopcolor,e.count);e._position=
0}};var a=b.math.round,d=b.math.degToRad,c=function(e,h,i,m){return{x:e+i*Math.cos(d(m-90)),y:h+i*Math.sin(d(m-90))}},f=function(e,h,i,m){e=g(e)||{r:0,g:0,b:0,a:1};h=g(h)||{r:255,g:255,b:255,a:1};var p=[],l,n,j=1,k=1/m,o=0;for(n=l=0;l<m;l++,n+=k){var q={r:e.r*j+(1-j)*h.r,g:e.g*j+(1-j)*h.g,b:e.b*j+(1-j)*h.b,a:e.a*j+(1-j)*h.a};p.push("rgba("+a(q.r,0)+","+a(q.g,0)+","+a(q.b,0)+","+a(q.a,2)+")");if(o==0&&n>=i)o=1/(m-l);j-=o;if(l==m-2)j=0}return p},g=function(e){var h=null,i=null;if(!h)if(h=/^#?([a-fA-F0-9]{1,2})([a-fA-F0-9]{1,2})([a-fA-F0-9]{1,2})$/.exec(e)){for(i=
1;i<4;i++)h[i]=h[i].length==1?h[i]+h[i]:h[i];i={r:parseInt(h[1],16),g:parseInt(h[2],16),b:parseInt(h[3],16),a:1}}if(!h)if(h=/[^0-9]*([0-9\.]+)[^0-9]*([0-9\.]+)[^0-9]*([0-9\.]+)[^0-9]*([0-9\.]+)?/.exec(e))i={r:h[1],g:h[2],b:h[3],a:h[4]||1};return i};return b.ui.xy.CSpinner});
define(["../../../../_amd/core","../../../../ux/inertia/js/inertia"],function(b){b.ui.layout.Scroller=function(a){this.uId=b.getUId();this._direction=this._target=null;this._captureFlow=true;this._view={x:0,y:0,viewportSizeX:0,viewportSizeY:0,sizeX:0,sizeY:0,limitX:0,limitY:0,shiftOriginY:0,shiftLimitY:0,scrollbars:{x:null,y:null,active:true,width:null,backgroundColor:null,borderColor:null,opacityTransition:null},autoRefreshOptions:{active:false,checkDelay:1E3,handler:null},timerSize:null};this._scroll=
{canScrollX:false,canScrollY:false,mustScrollX:false,mustScrollY:false,friction:14,acceleration:-0.00126,minSpeed:0.05};this._transition={duration:0,delay:0,func:"cubic-bezier(0.1, 0.2, 0.5, 1)",endHandler:null};this._callbacks={scrollerTouched:null,scrollerClicked:null,startScrolling:null,scrolling:null,endScrolling:null,startSliding:null,stopSliding:null};this._inertia=this._movementtracker=null;this._activated=true;this._animated=this._moveOutside=false;this._selectionEvent=null;this._updateContext(a)};
b.ui.layout.Scroller.prototype={_DIRECTION_X:"x",_DIRECTION_Y:"y",_DIRECTION_XY:"xy",updateTargetSize:function(a,d,c){if(this._view.timerSize==null)if(c===true&&this._view.timerSize==null){this._refreshTargetSize(a,d,false);this._view.timerSize=b.setTimeout(this,"_refreshTargetSize",this._view.autoRefreshOptions.checkDelay,a,d,c)}else this._refreshTargetSize(a,d,c)},updateViewportSize:function(a,d){var c=this._target.parentNode.clientWidth,f=this._target.parentNode.clientHeight;if(b.isSet(a))c=a;
if(b.isSet(d))f=d;if(this._view.viewportSizeX!=c||this._view.viewportSizeY!=f){this._setViewportSize(c,f);this._refreshView()}},updateShiftBounds:function(a,d){var c=false;if(a!=this._view.shiftOriginY){this._view.shiftOriginY=a;if(this._view.y==0)this._view.y=a;c=true}if(d!=this._view.shiftLimitY){this._view.shiftLimitY=d;c=true}if(c){this._refreshView();this._backToBounds()}},autoRefresh:function(a){if(b.isSet(a.checkDelay)&&a.checkDelay>=0)this._view.autoRefreshOptions.checkDelay=a.checkDelay;
if(b.isSet(a.active)&&this._view.autoRefreshOptions.active!==a.active){this._view.autoRefreshOptions.active=a.active;this._listenToContentChanges(a.active)}},scrollTo:function(a,d,c){this._slideTo(a,d,{duration:c})},backToBounds:function(){this._backToBounds()},getPosition:function(){return{x:this._view.x,y:this._view.y}},getViewProperties:function(){return this._view},enable:function(){this._activated=true},disable:function(){this._activated=false},destroy:function(){this._removeListeners();this._movementtracker.destroy();
delete this._movementtracker;this._inertia.destroy();delete this._inertia;this._removeScrollbars(true,true);for(var a in this._callbacks)this._callbacks[a]=null;if(this._view.timerSize!=null){clearTimeout(this._view.timerSize);this._view.timerSize=null}b.fx.apply(this._target,{"user-select":""});b.fx.applyTransition(this._target,"","","","");b.fx.setTransform(this._target,"");this._target=null},changeContext:function(a){this.destroy();this._updateContext(a)},_setTargetSize:function(a,d){this._view.sizeX=
a;this._view.sizeY=d},_setViewportSize:function(a,d){this._view.viewportSizeX=a;this._view.viewportSizeY=d},_updateContext:function(a){this._properties=a;if(this._validateProperties()!==false){this._initProperties();this._initListeners();this._slideTo(0,0);this._refreshView()}},_validateProperties:function(){return true},_raisePropertyError:function(a){b.log("[Scroller] Error: "+a+" missing or invalid")},_initProperties:function(){this._target=$(this._properties.target);b.fx.apply(this._target,{"user-select":"none"});
if(b.isSet(this._properties.shiftOriginY))this._view.shiftOriginY=this._properties.shiftOriginY;if(b.isSet(this._properties.shiftLimitY))this._view.shiftLimitY=this._properties.shiftLimitY;this._setTargetSize(this._target.offsetWidth,this._target.offsetHeight);this._setViewportSize(this._target.parentNode.clientWidth,this._target.parentNode.clientHeight);this._direction=this._properties.direction;if(this._direction==this._DIRECTION_X||this._direction==this._DIRECTION_XY)this._scroll.mustScrollX=true;
if(this._direction==this._DIRECTION_Y||this._direction==this._DIRECTION_XY)this._scroll.mustScrollY=true;if(this._properties.captureFlow===false)this._captureFlow=false;if(b.isSet(this._properties.callbacks))for(var a in this._callbacks){var d=this._properties.callbacks[a];if(b.isSet(d))this._callbacks[a]=d}if(b.isSet(this._properties.scrollbars))for(a in this._view.scrollbars){d=this._properties.scrollbars[a];if(b.isSet(d))this._view.scrollbars[a]=d}a=this._properties.friction;if(b.isSet(a)&&b.isInteger(a)){this._scroll.friction=
Math.max(Math.min(a,100),1);this._scroll.acceleration=Math.min(-9.0E-5*this._scroll.friction,-1.0E-4);this._scroll.minSpeed=Math.sqrt(Math.abs(this._scroll.acceleration*2))}delete this._properties},_initListeners:function(){this._movementtracker=new b.ux.MovementTracker({target:this._target,captureFlow:this._captureFlow,preventStart:false,preventMove:false,trackThresholdX:5,trackThresholdY:5});b.subscribe("/movementtracker/events/notrack",{context:this,method:"_handleTouchNotTracked"});b.subscribe("/movementtracker/events/mvtbegin",
{context:this,method:"_handleMovementBegin"});b.subscribe("/movementtracker/events/mvtchanged",{context:this,method:"_handleMovementChanged"});this._inertia=new b.ux.Inertia({movementtracker:this._movementtracker});b.subscribe("/inertia/events/inertiaComputed",{context:this,method:"_handleMovementStored"});this._transition.endHandler=b.fx.onTransitionEnd(this._target,b.bind(this._handleTransitionEnd,this),true)},_removeListeners:function(){b.unsubscribe("/movementtracker/events/notrack",{context:this,
method:"_handleTouchNotTracked"});b.unsubscribe("/movementtracker/events/mvtbegin",{context:this,method:"_handleMovementBegin"});b.unsubscribe("/movementtracker/events/mvtchanged",{context:this,method:"_handleMovementChanged"});b.unsubscribe("/inertia/events/inertiaComputed",{context:this,method:"_handleMovementStored"});this._target.removeEventListener(b.has.prop("transitionend"),this._transition.endHandler,false);this._transition.endHandler=null;this._listenToContentChanges(false)},_listenToContentChanges:function(a){if(a){var d=
this._view.autoRefreshOptions.checkDelay>0;this._view.autoRefreshOptions.handler=b.bind(function(){var c=this._target.offsetHeight;if(this._view.sizeX!=this._target.offsetWidth||this._view.sizeY!=c)this.updateTargetSize(null,null,d)},this);this._target.addEventListener("DOMSubtreeModified",this._view.autoRefreshOptions.handler,false)}else if(this._view.autoRefreshOptions.handler!=null){this._target.removeEventListener("DOMSubtreeModified",this._view.autoRefreshOptions.handler,false);this._view.autoRefreshOptions.handler=
null}},_refreshTargetSize:function(a,d,c){this._view.timerSize!=null&&clearTimeout(this._view.timerSize);var f=this._target.offsetWidth,g=this._target.offsetHeight;if(b.isSet(a))f=a;if(b.isSet(d))g=d;this._view.timerSize=null;if(this._view.sizeX!=f||this._view.sizeY!=g){this._setTargetSize(f,g);this._refreshView();if(c===true)this._view.timerSize=b.setTimeout(this,"_refreshTargetSize",this._view.autoRefreshOptions.checkDelay,a,d,c)}},_refreshView:function(){var a=this._scroll.canScrollX,d=this._scroll.canScrollY;
if(this._view.sizeX>this._view.viewportSizeX){this._view.limitX=this._view.viewportSizeX-this._view.sizeX;this._scroll.canScrollX=true}else{this._view.limitX=0;this._scroll.canScrollX=false}var c=this._view.sizeY-(this._view.shiftOriginY+this._view.shiftLimitY);if(c>this._view.viewportSizeY){this._view.limitY=this._view.viewportSizeY-c;this._scroll.canScrollY=true}else{this._view.limitY=0;this._scroll.canScrollY=false}this._scroll.canScrollX?this._movementtracker.updateTrackThresholdX(5):this._movementtracker.updateTrackThresholdX(999);
this._scroll.canScrollY?this._movementtracker.updateTrackThresholdY(5):this._movementtracker.updateTrackThresholdY(999);if(a!=this._scroll.canScrollX)if(this._view.x!=0){this._view.x=0;this._slideTo(null,null,{backToBound:true,duration:1})}if(d!=this._scroll.canScrollY)if(this._view.y!=0){this._view.y=0;this._slideTo(null,null,{backToBound:true,duration:1})}if(this._view.scrollbars.active==true){if(this._scroll.canScrollX&&this._scroll.mustScrollX){a=this._view.scrollbars.x;if(a==null)a=this._view.scrollbars.x=
new b.ui.layout.Scroller.Scrollbar({direction:"x",width:this._view.scrollbars.width,backgroundColor:this._view.scrollbars.backgroundColor,borderColor:this._view.scrollbars.borderColor,opacityTransition:this._view.scrollbars.opacityTransition});a.updateSize(this._view.viewportSizeX,this._view.sizeX);this._target.parentNode.appendChild(a.getDomNode())}else this._removeScrollbars(true,false);if(this._scroll.canScrollY&&this._scroll.mustScrollY){a=this._view.scrollbars.y;if(a==null)a=this._view.scrollbars.y=
new b.ui.layout.Scroller.Scrollbar({direction:"y",width:this._view.scrollbars.width,backgroundColor:this._view.scrollbars.backgroundColor,borderColor:this._view.scrollbars.borderColor,opacityTransition:this._view.scrollbars.opacityTransition});a.updateSize(this._view.viewportSizeY,c);this._target.parentNode.appendChild(a.getDomNode())}else this._removeScrollbars(false,true);c={timeout:null,hide:function(f){clearTimeout(this.timeout);f._hideScrollbars()}};c.timeout=b.setTimeout(c,"hide",1E3,this)}},
_removeScrollbars:function(a,d){if(a==true&&this._view.scrollbars.x!=null){this._target.parentNode.removeChild(this._view.scrollbars.x.getDomNode());this._view.scrollbars.x=null}if(d==true&&this._view.scrollbars.y!=null){this._target.parentNode.removeChild(this._view.scrollbars.y.getDomNode());this._view.scrollbars.y=null}},_handleTouchNotTracked:function(a){if(a.publisher.uId==this._movementtracker.uId){a=a.uxEvent;a.type=="start"&&b.isSet(this._callbacks.scrollerTouched)&&b.call(this._callbacks.scrollerTouched,
{uxEvent:a});if(this._activated!=false){a.preventDefault();a.stopPropagation();if(a.type=="start"){this._selectionEvent=null;if(this._animated==false)this._selectionEvent=a;a=this._getInstantPosition();if(!this._isAtPosition(a.x,a.y)){b.isSet(this._callbacks.stopSliding)&&b.call(this._callbacks.stopSliding,{});this._slideTo(a.x,a.y)}}else if(a.type=="end"){this._backToBounds();this._hideScrollbars();if(b.isSet(this._selectionEvent)){var d=0;if(!this._scroll.canScrollX&&!this._scroll.canScrollY){var c=
this._selectionEvent;d=a.x-c.x;c=a.y-c.y;d=Math.sqrt(d*d+c*c)}if(d<5){b.isSet(this._callbacks.scrollerClicked)&&b.call(this._callbacks.scrollerClicked,{uxEvent:a});this._handleSelection(a)}}}}}},_handleMovementBegin:function(a){if(a.publisher.uId==this._movementtracker.uId)if(this._activated!=false){a=a.uxEvent;a.preventDefault();a.stopPropagation();b.isSet(this._callbacks.startScrolling)&&b.call(this._callbacks.startScrolling,{uxEvent:a});b.isSet(this._view.autoRefreshOptions.handler)&&this._view.autoRefreshOptions.handler()}},
_handleSelection:function(a){var d=this._getProperEventTarget(a),c=d.tagName,f=d.type,g,e;if(b.isSet(c)){g=c.toLowerCase();e=(c=g=="input"&&f?f.toLowerCase()=="text":false)||g=="textarea"}if(e||g=="select")d.focus();b.has("touch")&&a.dispatch(d,"click")},_getProperEventTarget:function(a){var d=a.target;if(a.target.nodeType==3)d=d.parentNode;return d},_handleMovementChanged:function(a){if(a.publisher.uId==this._movementtracker.uId)if(this._activated!=false){a.uxEvent.stopPropagation();var d=a.movement,
c=d.pointStatement[d.pointStatement.length-2];d=d.pointStatement[d.pointStatement.length-1];var f=d.x-c.x;c=d.y-c.y;var g=this._view.y;if(g>0)g-=this._view.shiftOriginY;else if(g<this._view.limitY)g+=this._view.shiftLimitY;this._moveOutside=false;g=this._getBoundsInfos(this._view.x,g);if(g.outsideOfBoundsX)if(g.directionX>0&&d.directionX>0||g.directionX<0&&d.directionX<0){f/=3;this._moveOutside=true}if(g.outsideOfBoundsY)if(g.directionY>0&&d.directionY>0||g.directionY<0&&d.directionY<0){c/=3;this._moveOutside=
true}d=this._view.x+b.math.round(f,0);f=this._view.y+b.math.round(c,0);this._slideTo(d,f);b.isSet(this._callbacks.scrolling)&&b.call(this._callbacks.scrolling,{uxEvent:a.uxEvent})}},_handleMovementStored:function(a){if(a.publisher.uId==this._inertia.uId)if(this._activated!=false){b.isSet(this._callbacks.endScrolling)&&b.call(this._callbacks.endScrolling,{uxEvent:a.uxEvent});a=a.movement;this._interpretInertia(a);if(!this._moveOutside&&!this._isAtPosition(a.destX,a.destY))this._slideTo(a.destX,a.destY,
{duration:a.duration,speed:a.speed});else{this._backToBounds();this._hideScrollbars()}}},_interpretInertia:function(a){var d=this._scroll.canScrollX&&this._scroll.mustScrollX,c=this._scroll.canScrollY&&this._scroll.mustScrollY,f=b.math.round(this._view.viewportSizeX/3,1),g=b.math.round(this._view.viewportSizeY/3,1),e=this._scroll.acceleration,h=this._scroll.minSpeed,i=a.speedX,m=a.speedY;i=i<h?0:i;m=m<h?0:m;h=-(i*i)/(2*e);var p=-(m*m)/(2*e),l=-i/e;e=-m/e;d||(h=l=0);c||(p=e=0);var n=this._getBoundsInfos(this._view.x+
h*a.directionX,this._view.y+p*a.directionY);if(n.outsideOfBoundsX&&n.distanceToBoundX>f){f=n.distanceToBoundX-f;var j=f/h;h-=f;l-=j*l}if(n.outsideOfBoundsY&&n.distanceToBoundY>g){f=n.distanceToBoundY-g;j=f/p;p-=f;e-=j*e}a.destX=this._view.x+b.math.round(h*a.directionX,0);a.destY=this._view.y+b.math.round(p*a.directionY,0);l=Math.max(b.math.round(l,0),1);e=Math.max(b.math.round(e,0),1);a.duration=e;a.speed=b.math.round(m,3);if(d&&!c||d&&c&&l>e){a.duration=l;a.speed=b.math.round(i,3)}},_handleTransitionEnd:function(){if(this._animated==
true){this._animated=false;b.isSet(this._callbacks.stopSliding)&&b.call(this._callbacks.stopSliding,{});var a=0;if(this._backToBounds())a=350;this._hideScrollbars(a)}},_backToBounds:function(){var a=this._getBoundsInfos(this._view.x,this._view.y);if(a.outsideOfBounds){var d=this._view.x,c=this._view.y;if(a.outsideOfBoundsX)d=a.positionOfBoundX;if(a.outsideOfBoundsY)c=a.positionOfBoundY;this._slideTo(d,c,{backToBound:true});return true}return false},_getBoundsInfos:function(a,d){var c={outsideOfBoundsX:false,
outsideOfBoundsY:false,distanceToBoundX:0,distanceToBoundY:0};if(a>0||a<this._view.limitX){c.outsideOfBoundsX=true;if(a>0){c.distanceToBoundX=Math.abs(a);c.directionX=1;c.positionOfBoundX=0}else{c.distanceToBoundX=Math.abs(a-this._view.limitX);c.directionX=-1;c.positionOfBoundX=this._view.limitX}}if(d>0||d<this._view.limitY){c.outsideOfBoundsY=true;if(d>0){c.distanceToBoundY=Math.abs(d);c.directionY=1;c.positionOfBoundY=0}else{c.distanceToBoundY=Math.abs(d-this._view.limitY);c.directionY=-1;c.positionOfBoundY=
this._view.limitY}}c.outsideOfBounds=c.outsideOfBoundsX||c.outsideOfBoundsY;return c},_isAtPosition:function(a,d){if(this._view.x==a&&this._view.y==d)return true;return false},_slideTo:function(a,d,c){var f=c&&c.duration?c.duration:0,g=c&&c.speed?c.speed:0;c=c&&c.backToBound?c.backToBound:false;this._transition.duration=f;if(f>=1){this._animated=true;b.isSet(this._callbacks.startSliding)&&b.call(this._callbacks.startSliding,{duration:f,speed:g})}else this._animated=false;f=f+"ms";g=this._transition.delay+
"ms";var e=this._transition.func;if(c){f="350ms";e="cubic-bezier(0.3, 0.1, 1.0, 0.5)"}b.fx.applyTransformTransition(this._target,f,g,e);if(this._view.scrollbars.active==true){this._view.scrollbars.x!=null&&this._view.scrollbars.x.applyTransition(f,g,e);this._view.scrollbars.y!=null&&this._view.scrollbars.y.applyTransition(f,g,e)}this._translateTo(a,d)},_getInstantPosition:function(){var a=b.fx.getTransformPosition(this._target);a.y+=this._view.shiftOriginY;return a},_translateTo:function(a,d){var c=
this._view.x,f=this._view.y;if(b.isSet(a)&&this._scroll.canScrollX&&this._scroll.mustScrollX)c=a;if(b.isSet(d)&&this._scroll.canScrollY&&this._scroll.mustScrollY)f=d;this._view.x=parseInt(c);this._view.y=parseInt(f);this._target.translate(this._view.x,this._view.y-this._view.shiftOriginY);if(this._view.scrollbars.active==true){this._view.scrollbars.x!=null&&this._view.scrollbars.x.updatePosition(this._view.x,this._view.y);this._view.scrollbars.y!=null&&this._view.scrollbars.y.updatePosition(this._view.x,
this._view.y)}},_hideScrollbars:function(a){if(this._view.scrollbars.active==true){this._view.scrollbars.x!=null&&this._view.scrollbars.x.hide(a);this._view.scrollbars.y!=null&&this._view.scrollbars.y.hide(a)}}};b.ui.layout.Scroller.Scrollbar=function(a){this.uId=b.getUId();this._properties=a;this._direction=null;this._backgroundColor="rgba(0, 0, 0, 0.55)";this._borderColor="rgba(0, 0, 0, 0.2)";this._opacityTransition=true;this._view={x:0,y:0,viewportSize:0,contentSize:0,size:0,width:0,ratioSize:0,
ratioPosition:0,ratioBounce:0,borderSize:1,availableSpace:0,showed:true};this._transition={duration:"",delay:"",func:""};this._ctx=this._canvasNode=this._domNode=null;this._firstHide=true;if(this._validateProperties()!==false){this._initProperties();this._initDom()}};b.ui.layout.Scroller.Scrollbar.prototype={_DEFAULT_WIDTH:5,getDomNode:function(){return this._domNode},updateSize:function(a,d){var c=0,f=0;this._view.viewportSize=a-this._view.borderSize*2;this._view.contentSize=d;if(a<d){this._view.ratioSize=
this._view.viewportSize/this._view.contentSize;this._view.ratioSize*=0.11*(this._view.contentSize/this._view.viewportSize)+0.89}else this._view.ratioSize=1;c=f=this._view.ratioSize*this._view.viewportSize;if(this._direction=="y")c=this._view.width;else f=this._view.width;this._resize(c,f);this._view.availableSpace=this._view.viewportSize-this._view.size;this._view.ratioPosition=this._view.availableSpace/(this._view.contentSize-this._view.viewportSize);this._view.ratioBounce=0.0010*this._view.contentSize+
3},updatePosition:function(a,d){this._view.showed==false&&this.show();var c=0,f=0,g=this._view.availableSpace;if(this._direction=="y"){f=-d*this._view.ratioPosition;if(f<0||f>g)f=f<0?Math.max(f+f*this._view.ratioBounce,-this._view.size+5):Math.min(f+(f-g)*this._view.ratioBounce,this._view.viewportSize-5)}else{c=-a*this._view.ratioPosition;if(c<0||c>g)c=c<0?Math.max(c+c*this._view.ratioBounce,-this._view.size+5):Math.min(c+(c-g)*this._view.ratioBounce,this._view.viewportSize-5)}this._translateTo(c,
f)},show:function(){if(this._view.showed!=true){this._view.showed=true;b.fx.applyTransition(this._canvasNode,"opacity","0ms","0ms","default");this._canvasNode.style.opacity=1}},hide:function(a){if(this._view.showed!=false){this._view.showed=false;if(this._opacityTransition==true){var d=300;if(b.isSet(a))d+=a;if(this._firstHide){this._firstHide=false;d+=600}d+="ms";b.fx.applyTransition(this._canvasNode,"opacity","200ms",d,"default")}this._canvasNode.style.opacity=0}},applyTransition:function(a,d,c){var f=
false;if(f=(f=(f=f||a!=this._transition.duration)||d!=this._transition.delay)||c!=this._transition.func){this._transition.duration=a;this._transition.delay=d;this._transition.func=c;b.fx.applyTransformTransition(this._domNode,a,d,c)}},_validateProperties:function(){return true},_raisePropertyError:function(a){b.log("[Scrollbar] Error: "+a+" missing or invalid")},_initProperties:function(){this._direction=this._properties.direction;this._view.width=this._DEFAULT_WIDTH;if(b.isSet(this._properties.width))this._view.width=
this._properties.width;if(b.isSet(this._properties.borderColor))this._borderColor=this._properties.borderColor;if(b.isSet(this._properties.backgroundColor))this._backgroundColor=this._properties.backgroundColor;if(b.isSet(this._properties.opacityTransition))this._opacityTransition=this._properties.opacityTransition},_initDom:function(){var a=this._domNode=document.createElement("div"),d=this._canvasNode=document.createElement("canvas");this._ctx=d.getContext("2d");a.appendChild(d);var c={position:"absolute",
"pointer-events":"none",opacity:1};if(this._direction=="y"){c.top="0px";c.right="1px"}else{c.bottom="2px";c.left="0px"}b.fx.apply(a,c);b.fx.apply(d,{position:"absolute"});d.translate(0,0)},_drawbar:function(){var a=this._direction=="y",d=this._ctx,c=a?this._view.width/2:this._view.width/2+1,f=a?this._view.width/2+1:this._view.width/2,g=a?this._view.width:this._view.size-1,e=a?this._view.size-1:this._view.width,h=a?g/2:e/2;d.fillStyle=this._backgroundColor;d.strokeStyle=this._borderColor;d.lineWidth=
this._view.borderSize;d.beginPath();if(a){d.arc(c,f,h,Math.PI,0,false);d.lineTo(c+h,e-h);d.arc(c,e-h,h,0,Math.PI,false);d.lineTo(c-h,f)}else{d.arc(c,f,h,Math.PI/2,3*Math.PI/2,false);d.lineTo(g-h,f-h);d.arc(g-h,f,h,3*Math.PI/2,Math.PI/2,false);d.lineTo(c,f+h)}d.closePath();d.fill();d.stroke()},_resize:function(a,d){this._view.size=this._direction=="y"?d:a;var c=this._canvasNode;this._ctx.clearRect(0,0,c.width,c.height);b.fx.apply(this._domNode,{width:a+1+"px",height:d+"px"});c.width=a;c.height=d;this._drawbar()},
_translateTo:function(a,d){this._view.x=a;this._view.y=d;this._domNode.translate(a,d)}};return b.ui.layout.Scroller});
